{
   "source":2,
   "id":1,
   "revision":11,
   "name":"PartsUnlimitedMRP.CD",
   "description":null,
   "createdBy":{
      "id":"1431a02a-0caf-4637-b260-b691ec695b4c",
      "displayName":"Display Name",
      "uniqueName":"name@domain.com",
      "url":"https://app.vssps.visualstudio.com/489ac5f7-08f6-41e6-81f1-e84b6ef7345e/_apis/Identities/1431a02a-0caf-4637-b260-b691ec695b4c",
      "imageUrl":"https://vstsaccount.visualstudio.com/_api/_common/identityImage?id=1431a02a-0caf-4637-b260-b691ec695b4c"
   },
   "createdOn":"2017-04-24T18:56:16.650Z",
   "modifiedBy":{
      "id":"1431a02a-0caf-4637-b260-b691ec695b4c",
      "displayName":"Display Name",
      "uniqueName":"name@domain.com",
      "url":"https://app.vssps.visualstudio.com/489ac5f7-08f6-41e6-81f1-e84b6ef7345e/_apis/Identities/1431a02a-0caf-4637-b260-b691ec695b4c",
      "imageUrl":"https://vstsaccount.visualstudio.com/_api/_common/identityImage?id=1431a02a-0caf-4637-b260-b691ec695b4c"
   },
   "modifiedOn":"2017-06-06T08:11:43.693Z",
   "lastRelease":null,
   "path":"\\",
   "variables":{
      "sshUser":{
         "value":"azureadmin"
      },
      "sshPassword":{
         "value":null,
         "isSecret":true
      },
      "ResourceGroup":{
         "value":"ceedevopswebinarv2"
      },
      "Location":{
         "value":"westeurope"
      },
      "dnsName":{
         "value":"ceedevopswebinarv2"
      }
   },
   "variableGroups":[

   ],
   "environments":[
      {
         "id":1,
         "name":"dev",
         "rank":1,
         "owner":{
            "id":"1431a02a-0caf-4637-b260-b691ec695b4c",
            "displayName":"Display Name",
            "uniqueName":"name@domain.com",
            "url":"https://app.vssps.visualstudio.com/489ac5f7-08f6-41e6-81f1-e84b6ef7345e/_apis/Identities/1431a02a-0caf-4637-b260-b691ec695b4c",
            "imageUrl":"https://vstsaccount.visualstudio.com/_api/_common/identityImage?id=1431a02a-0caf-4637-b260-b691ec695b4c"
         },
         "variables":{

         },
         "preDeployApprovals":{
            "approvals":[
               {
                  "rank":1,
                  "isAutomated":true,
                  "isNotificationOn":false,
                  "id":1
               }
            ]
         },
         "deployStep":{
            "tasks":[

            ],
            "id":2
         },
         "postDeployApprovals":{
            "approvals":[
               {
                  "rank":1,
                  "isAutomated":false,
                  "isNotificationOn":false,
                  "approver":{
                     "id":"1431a02a-0caf-4637-b260-b691ec695b4c",
                     "displayName":"Display Name",
                     "uniqueName":"name@domain.com",
                     "url":"https://app.vssps.visualstudio.com/489ac5f7-08f6-41e6-81f1-e84b6ef7345e/_apis/Identities/1431a02a-0caf-4637-b260-b691ec695b4c",
                     "imageUrl":"https://vstsaccount.visualstudio.com/_api/_common/identityImage?id=1431a02a-0caf-4637-b260-b691ec695b4c"
                  },
                  "id":35
               }
            ],
            "approvalOptions":{
               "requiredApproverCount":0,
               "releaseCreatorCanBeApprover":true,
               "autoTriggeredAndPreviousEnvironmentApprovedCanBeSkipped":false,
               "enforceIdentityRevalidation":false,
               "timeoutInMintues":43200
            }
         },
         "deployPhases":[
            {
               "deploymentInput":{
                  "parallelExecution":{
                     "parallelExecutionType":"none"
                  },
                  "skipArtifactsDownload":false,
                  "timeoutInMinutes":0,
                  "queueId":174,
                  "demands":[

                  ],
                  "enableAccessToken":false
               },
               "rank":1,
               "phaseType":1,
               "name":"Run on agent",
               "workflowTasks":[
                  {
                     "taskId":"94a74903-f93f-4075-884f-dc11f34058b4",
                     "version":"2.*",
                     "name":"Deploy Azure resources through ARM",
                     "enabled":true,
                     "alwaysRun":false,
                     "continueOnError":false,
                     "timeoutInMinutes":0,
                     "definitionType":"task",
                     "inputs":{
                        "ConnectedServiceName":"41b388d2-8658-47a5-a05c-0c407919b5f2",
                        "action":"Create Or Update Resource Group",
                        "resourceGroupName":"$(ResourceGroup)$(Release.EnvironmentName)",
                        "location":"$(Location)",
                        "templateLocation":"Linked artifact",
                        "csmFileLink":"",
                        "csmParametersFileLink":"",
                        "csmFile":"$(System.DefaultWorkingDirectory)/PartsUnlimitedMRP.CI/env/PartsUnlimitedMRP.json",
                        "csmParametersFile":"",
                        "overrideParameters":"-mrpAdminUsername $(sshUser) -mrpAdminPassword $(sshPassword) -mrpDnsNameForPublicIP $(dnsName)$(Release.EnvironmentName)",
                        "deploymentMode":"Incremental",
                        "enableDeploymentPrerequisites":"None",
                        "deploymentGroupEndpoint":"",
                        "project":"",
                        "deploymentGroupName":"",
                        "copyAzureVMTags":"true",
                        "outputVariable":""
                     }
                  },
                  {
                     "taskId":"e213ff0f-5d5c-4791-802d-52ea3e7be1f1",
                     "version":"1.*",
                     "name":"Deploy MRP using SFTP and SSH through PowerShell",
                     "enabled":true,
                     "alwaysRun":false,
                     "continueOnError":false,
                     "timeoutInMinutes":0,
                     "definitionType":"task",
                     "inputs":{
                        "scriptType":"filePath",
                        "scriptName":"$(System.DefaultWorkingDirectory)/PartsUnlimitedMRP.CI/deploy/SSH-MRP-Artifacts.ps1",
                        "arguments":"-sshTarget '$(dnsName)$(Release.EnvironmentName).$(Location).cloudapp.azure.com' -sshUser '$(sshUser)' -sshPassword '$(sshPassword)'",
                        "inlineScript":"# You can write your powershell scripts inline here. \n# You can also pass predefined and custom variables to this scripts using arguments\n\n Write-Host \"Hello World\"",
                        "workingFolder":"",
                        "failOnStandardError":"false"
                     }
                  }
               ]
            }
         ],
         "environmentOptions":{
            "emailNotificationType":"OnlyOnFailure",
            "emailRecipients":"release.environment.owner;release.creator",
            "skipArtifactsDownload":false,
            "timeoutInMinutes":0,
            "enableAccessToken":false,
            "publishDeploymentStatus":false
         },
         "demands":[

         ],
         "conditions":[
            {
               "name":"ReleaseStarted",
               "conditionType":1,
               "value":""
            }
         ],
         "executionPolicy":{
            "concurrencyCount":0,
            "queueDepthCount":0
         },
         "schedules":[

         ],
         "retentionPolicy":{
            "daysToKeep":30,
            "releasesToKeep":3,
            "retainBuild":true
         }
      },
      {
         "id":10,
         "name":"prod",
         "rank":2,
         "owner":{
            "id":"1431a02a-0caf-4637-b260-b691ec695b4c",
            "displayName":"Display Name",
            "uniqueName":"name@domain.com",
            "url":"https://app.vssps.visualstudio.com/489ac5f7-08f6-41e6-81f1-e84b6ef7345e/_apis/Identities/1431a02a-0caf-4637-b260-b691ec695b4c",
            "imageUrl":"https://vstsaccount.visualstudio.com/_api/_common/identityImage?id=1431a02a-0caf-4637-b260-b691ec695b4c"
         },
         "variables":{

         },
         "preDeployApprovals":{
            "approvals":[
               {
                  "rank":1,
                  "isAutomated":false,
                  "isNotificationOn":false,
                  "approver":{
                     "id":"1431a02a-0caf-4637-b260-b691ec695b4c",
                     "displayName":"Display Name",
                     "uniqueName":"name@domain.com",
                     "url":"https://app.vssps.visualstudio.com/489ac5f7-08f6-41e6-81f1-e84b6ef7345e/_apis/Identities/1431a02a-0caf-4637-b260-b691ec695b4c",
                     "imageUrl":"https://vstsaccount.visualstudio.com/_api/_common/identityImage?id=1431a02a-0caf-4637-b260-b691ec695b4c"
                  },
                  "id":36
               }
            ],
            "approvalOptions":{
               "requiredApproverCount":0,
               "releaseCreatorCanBeApprover":true,
               "autoTriggeredAndPreviousEnvironmentApprovedCanBeSkipped":false,
               "enforceIdentityRevalidation":false,
               "timeoutInMintues":43200
            }
         },
         "deployStep":{
            "tasks":[

            ],
            "id":37
         },
         "postDeployApprovals":{
            "approvals":[
               {
                  "rank":1,
                  "isAutomated":true,
                  "isNotificationOn":false,
                  "id":38
               }
            ]
         },
         "deployPhases":[
            {
               "deploymentInput":{
                  "parallelExecution":{
                     "parallelExecutionType":"none"
                  },
                  "skipArtifactsDownload":false,
                  "timeoutInMinutes":0,
                  "queueId":174,
                  "demands":[

                  ],
                  "enableAccessToken":false
               },
               "rank":1,
               "phaseType":1,
               "name":"Run on agent",
               "workflowTasks":[
                  {
                     "taskId":"94a74903-f93f-4075-884f-dc11f34058b4",
                     "version":"2.*",
                     "name":"Deploy Azure resources through ARM",
                     "enabled":true,
                     "alwaysRun":false,
                     "continueOnError":false,
                     "timeoutInMinutes":0,
                     "definitionType":"task",
                     "inputs":{
                        "ConnectedServiceName":"41b388d2-8658-47a5-a05c-0c407919b5f2",
                        "action":"Create Or Update Resource Group",
                        "resourceGroupName":"$(ResourceGroup)$(Release.EnvironmentName)",
                        "location":"$(Location)",
                        "templateLocation":"Linked artifact",
                        "csmFileLink":"",
                        "csmParametersFileLink":"",
                        "csmFile":"$(System.DefaultWorkingDirectory)/PartsUnlimitedMRP.CI/env/PartsUnlimitedMRP.json",
                        "csmParametersFile":"",
                        "overrideParameters":"-mrpAdminUsername $(sshUser) -mrpAdminPassword $(sshPassword) -mrpDnsNameForPublicIP $(dnsName)$(Release.EnvironmentName)",
                        "deploymentMode":"Incremental",
                        "enableDeploymentPrerequisites":"None",
                        "deploymentGroupEndpoint":"",
                        "project":"",
                        "deploymentGroupName":"",
                        "copyAzureVMTags":"true",
                        "outputVariable":""
                     }
                  },
                  {
                     "taskId":"e213ff0f-5d5c-4791-802d-52ea3e7be1f1",
                     "version":"1.*",
                     "name":"Deploy MRP using SFTP and SSH through PowerShell",
                     "enabled":true,
                     "alwaysRun":false,
                     "continueOnError":false,
                     "timeoutInMinutes":0,
                     "definitionType":"task",
                     "inputs":{
                        "scriptType":"filePath",
                        "scriptName":"$(System.DefaultWorkingDirectory)/PartsUnlimitedMRP.CI/deploy/SSH-MRP-Artifacts.ps1",
                        "arguments":"-sshTarget '$(dnsName)$(Release.EnvironmentName).$(Location).cloudapp.azure.com' -sshUser '$(sshUser)' -sshPassword '$(sshPassword)'",
                        "inlineScript":"# You can write your powershell scripts inline here. \n# You can also pass predefined and custom variables to this scripts using arguments\n\n Write-Host \"Hello World\"",
                        "workingFolder":"",
                        "failOnStandardError":"false"
                     }
                  }
               ]
            }
         ],
         "environmentOptions":{
            "emailNotificationType":"OnlyOnFailure",
            "emailRecipients":"release.environment.owner;release.creator",
            "skipArtifactsDownload":false,
            "timeoutInMinutes":0,
            "enableAccessToken":false,
            "publishDeploymentStatus":false
         },
         "demands":[

         ],
         "conditions":[
            {
               "name":"dev",
               "conditionType":2,
               "value":"4"
            }
         ],
         "executionPolicy":{
            "concurrencyCount":0,
            "queueDepthCount":0
         },
         "schedules":[

         ],
         "retentionPolicy":{
            "daysToKeep":30,
            "releasesToKeep":3,
            "retainBuild":true
         }
      }
   ],
   "artifacts":[
      {
         "sourceId":"bfaeceb5-832a-47bc-9712-3a2d74419cfe:66",
         "type":"Build",
         "alias":"PartsUnlimitedMRP.CI",
         "definitionReference":{
            "artifactSourceDefinitionUrl":{
               "id":"https://vstsaccount.visualstudio.com/_permalink/_build/index?collectionId=68cc4fe3-8aec-406b-81d7-3938d24c09c6&projectId=bfaeceb5-832a-47bc-9712-3a2d74419cfe&definitionId=66",
               "name":""
            },
            "defaultVersionType":{
               "id":"latestType",
               "name":"Latest"
            },
            "definition":{
               "id":"66",
               "name":"PartsUnlimitedMRP.CI"
            },
            "project":{
               "id":"bfaeceb5-832a-47bc-9712-3a2d74419cfe",
               "name":"Playground"
            }
         },
         "isPrimary":true
      }
   ],
   "triggers":[
      {
         "artifactAlias":"PartsUnlimitedMRP.CI",
         "triggerConditions":[

         ],
         "triggerType":1
      }
   ],
   "releaseNameFormat":"$(Release.DefinitionName)_$(Date:yyyyMMdd)$(Rev:.rrr)",
   "url":"https://vstsaccount.vsrm.visualstudio.com/bfaeceb5-832a-47bc-9712-3a2d74419cfe/_apis/Release/definitions/1",
   "_links":{
      "self":{
         "href":"https://vstsaccount.vsrm.visualstudio.com/bfaeceb5-832a-47bc-9712-3a2d74419cfe/_apis/Release/definitions/1"
      },
      "web":{
         "href":"https://vstsaccount.visualstudio.com/bfaeceb5-832a-47bc-9712-3a2d74419cfe/_release?definitionId=1"
      }
   },
   "tags":[

   ],
   "properties":{

   }
}